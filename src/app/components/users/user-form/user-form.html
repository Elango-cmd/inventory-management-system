<div class="container mt-4">
  <h2>{{ isEditMode ? 'Edit User' : 'Add New User' }}</h2>

  <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
    <div class="form-group mb-3">
      <label for="userName">User Name</label>
      <input id="userName" type="text" formControlName="userName" class="form-control" />
      <div *ngIf="userForm.get('userName')?.invalid && userForm.get('userName')?.touched" class="text-danger">
        User Name is required
      </div>
    </div>

    <div class="form-group mb-3">
      <label for="emailId">Email</label>
      <input id="emailId" type="email" formControlName="emailId" class="form-control" />
      <div *ngIf="userForm.get('emailId')?.invalid && userForm.get('emailId')?.touched" class="text-danger">
        Enter a valid email
      </div>
    </div>

    <div class="form-group mb-3" *ngIf="!isEditMode">
      <label for="password">Password</label>
      <input id="password" type="password" formControlName="password" class="form-control" />
      <div *ngIf="userForm.get('password')?.invalid && userForm.get('password')?.touched" class="text-danger">
        Password is required
      </div>
    </div>

    <div class="form-group mb-3">
      <label for="role">Role</label>
      <select id="role" formControlName="role" class="form-control">
        <option value="">Select Role</option>
        <option value="USER">USER</option>
        <option value="ADMIN">ADMIN</option>
      </select>
      <div *ngIf="userForm.get('role')?.invalid && userForm.get('role')?.touched" class="text-danger">
        Role is required
      </div>
    </div>

    <button type="submit" [disabled]="userForm.invalid || loading" class="btn btn-primary me-2">
      {{ isEditMode ? 'Update' : 'Create' }}
    </button>
    <button type="button" (click)="onCancel()" class="btn btn-secondary">Cancel</button>

    <div *ngIf="errorMessage" class="text-danger mt-3">{{ errorMessage }}</div>
  </form>
</div>
